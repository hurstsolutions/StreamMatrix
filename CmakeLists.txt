cmake_minimum_required(VERSION 3.16)
project(EventStreamer LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTOUIC ON)
set(CMAKE_AUTORCC ON)

set(CMAKE_PREFIX_PATH "/usr/local/opt/qt")

# Find Qt
find_package(Qt6 COMPONENTS Widgets REQUIRED)

# Find GStreamer
find_package(PkgConfig REQUIRED)
pkg_check_modules(GST REQUIRED gstreamer-1.0 gstreamer-video-1.0 gstreamer-audio-1.0)

include_directories(${GST_INCLUDE_DIRS})
link_directories(${GST_LIBRARY_DIRS})

add_executable(StreamMatrix
    src/main.cpp
    src/gui/MainWindow.cpp
    src/gui/MainWindow.h
)

target_link_libraries(StreamMatrix
    Qt6::Widgets
    ${GST_LIBRARIES}
)